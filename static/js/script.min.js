function launchFullScreen(e){e.requestFullScreen?e.requestFullScreen():e.mozRequestFullScreen?e.mozRequestFullScreen():e.webkitRequestFullScreen?e.webkitRequestFullScreen():e.msRequestFullScreen?e.msRequestFullScreen():e.webkitEnterFullScreen()}function resetFixtures(){bootbox.confirm("Are you sure you want to reset all fixture parameter values?",function(e){!0===e&&socket.emit("resetFixtures")})}function resetFixture(e){bootbox.confirm("Are you sure you want to reset this fixture's parameter values?",function(t){!0===t&&socket.emit("resetFixture",e)})}function addFixtureModal(){socket.emit("getFixtureProfiles")}function getShowModal(){socket.emit("getShowsFromUSB")}function openFixtureDefinitionModal(){$("#openFixtureDefinitionModal").modal("show")}function viewFixtureSettings(e){socket.emit("getFixtureSettings",e)}function getEffects(e){socket.emit("getEffects",e)}function updateFixtureParameterValue(e,t,o){socket.emit("changeFixtureParameterValue",{id:t,pid:o,value:e.value})}function updateFixtureParameterLock(e,t,o){socket.emit("changeFixtureParameterLock",{id:t,pid:o})}function useFixtureChip(e,t,o){socket.emit("useFixtureChip",{id:t,pid:o})}function changeFixtureEffectState(e,t,o){socket.emit("changeFixtureEffectState",{id:t,effectid:o})}function removeFixture(e){bootbox.confirm("Are you sure you want to delete this fixture?",function(t){!0===t&&(socket.emit("removeFixture",e),openTab("fixtures"))})}function saveFixtureSettings(e){socket.emit("editFixtureSettings",{id:e,name:$("#fixtureNameInput").val(),shortName:$("#fixtureShortNameInput").val(),startDMXAddress:$("#fixtureDMXAddressInput").val()})}function removeCue(e){bootbox.confirm("Are you sure you want to delete this cue?",function(t){!0===t&&(socket.emit("removeCue",e),openTab("cues"))})}function saveCueSettings(e){socket.emit("editCueSettings",{id:e,name:$("#cueNameInput").val(),upTime:$("#cueUpTimeInput").val(),downTime:$("#cueDownTimeInput").val(),follow:$("#cueFollowInput").val()})}function recordCue(){socket.emit("recordCue")}function nextCue(){socket.emit("nextCue")}function lastCue(){socket.emit("lastCue")}function stopCue(){socket.emit("stopCue")}function gotoCue(e){socket.emit("gotoCue",e)}function updateCue(e){socket.emit("updateCue",e)}function cloneCueEnd(e){socket.emit("cloneCueEnd",e)}function cloneCueNext(e){socket.emit("cloneCueNext",e)}function moveCueUp(e){socket.emit("moveCueUp",e)}function moveCueDown(e){socket.emit("moveCueDown",e)}function removePreset(e){bootbox.confirm("Are you sure you want to delete this preset?",function(t){!0===t&&(socket.emit("removePreset",e),openTab("presets"))})}function viewPresetSettings(e){socket.emit("getPresetSettings",e)}function savePresetSettings(e){socket.emit("editPresetSettings",{id:e,name:$("#presetNameInput").val()})}function resetGroup(e){bootbox.confirm("Are you sure you want to reset this group's parameter values?",function(t){!0===t&&socket.emit("resetGroup",e)})}function resetGroups(){bootbox.confirm("Are you sure you want to reset all group parameter values?",function(e){!0===e&&socket.emit("resetGroups")})}function addGroupModal(){$("#groupFixtureIDs").multiselect("deselectAll"),$("#addGroupModal").modal("show")}function updateGroupParameterValue(e,t,o){socket.emit("changeGroupParameterValue",{id:t,pid:o,value:e.value})}function removeGroup(e){bootbox.confirm("Are you sure you want to delete this group?",function(t){!0===t&&(socket.emit("removeGroup",e),openTab("groups"))})}function saveGroupSettings(e){socket.emit("editGroupSettings",{id:e,name:$("#groupNameInput").val(),fixtureIDs:$("#groupFixtureIDsInput").val()})}function addGroup(){socket.emit("addGroup",$("#groupFixtureIDs").val()),document.getElementById("groupFixtureIDs").selectedIndex="-1",$("#addGroupModal").modal("hide")}function viewGroupSettings(e){socket.emit("getGroupSettings",e)}function openShowFileModal(){$("#openShowModal").modal("show")}function openAboutModal(){$("#openAboutModal").modal("show")}function openSettingsModal(){socket.emit("getSettings"),$("#openSettingsModal").modal("show")}function removeGroupFixture(e,t){bootbox.confirm("Are you sure you want to remove this fixture from this group?",function(o){!0===o&&socket.emit("removeGroupFixture",{group:e,fixture:t})})}function resetShow(){bootbox.confirm("Are you sure you want a new show? This will reset everything.",function(e){!0===e&&(socket.emit("resetShow"),openTab("fixtures"))})}function resetPresets(){bootbox.confirm("Are you sure you want to reset the presets?",function(e){!0===e&&(socket.emit("resetPresets"),openTab("presets"))})}function updateFixtureProfiles(){bootbox.confirm("Are you sure you want to update your show's fixture profiles? You should save the current show first. This will probably cause a blackout",function(e){!0===e&&(socket.emit("updateFixtureProfiles"),openTab("fixtures"))})}function saveSettingsBackground(){socket.emit("saveSettings",{defaultUpTime:$("#defaultUpTime").val(),defaultDownTime:$("#defaultDownTime").val(),udmx:$("#useUDMX").prop("checked"),automark:$("#useAutomark").prop("checked"),sacnIP:$("#sacnIP").val(),artnetIP:$("#artnetIP").val()})}function updateFirmware(){socket.emit("updateFirmware")}function saveShowToUSB(){bootbox.prompt("Show Name: ",function(e){""!=e.trim()?socket.emit("saveShowToUSB",e):bootbox.alert("You must enter a show name!")})}function shutdown(){socket.emit("shutdown")}function reboot(){socket.emit("reboot")}function closeAlert(){$("#alert").removeClass("show"),$("#alert").hasClass("alert-info")?$("#alert").removeClass("alert-info"):$("#alert").removeClass("alert-danger")}function openTab(e){var t,o,n;for(o=document.getElementsByClassName("tabcontent"),t=0;t<o.length;t++)o[t].style.display="none";if(document.getElementsByClassName("tabitem-"+e)[0])for(n=document.getElementsByClassName("tabitem"),t=0;t<n.length;t++)n[t].classList.remove("active");document.getElementById(e).style.display="block",currentTab=e,"fixtures"==currentTab&&(app.fixtures=backupFixtures),document.getElementsByClassName("tabitem-"+e)[0]&&document.getElementsByClassName("tabitem-"+e)[0].classList.add("active"),closeAlert(),"groups"==e&&$("#groupFixtureIDs").multiselect("rebuild")}function searchFixtureProfiles(){var e,t,o,n,i,r,u;for(e=document.getElementById("searchFixtureProfiles"),t=e.value.toUpperCase(),o=document.getElementById("fixtureProfilesList"),n=o.getElementsByTagName("li"),r=0;r<n.length;r++)i=n[r],u=i.textContent||i.innerText,u.toUpperCase().indexOf(t)>-1?n[r].style.display="":n[r].style.display="none"}var socket=io("http://"+document.domain+":"+location.port),currentTab="fixtures";document.getElementById("fixturesTab").click();var backupFixtures=[],app=new Vue({el:"#app",data:{fixtures:[],groups:[],presets:[],cues:[],showFiles:[],fixtureProfiles:[],fixtureEffects:[],effectFixture:"",usbPath:"",desktop:!1,version:"2.0.0 Beta 5",qrcode:"",appURL:"",currentCue:"",blackout:!1,startDMXAddress:1,newFixtureCreationCount:1,grandmaster:0},methods:{changePresetActive:function(e){socket.emit("changePresetActive",e)},viewPresetSettings:function(e){socket.emit("getPresetSettings",e)},viewFixtureParameters:function(e){socket.emit("getFixtureParameters",e)},viewGroupParameters:function(e){socket.emit("getGroupParameters",e)},viewCueSettings:function(e){socket.emit("getCueSettings",e)},lockedFixtureParameters:function(e){return!0===e?'<i class="ml-1 far fa-lock-alt fa-sm"></i>':""},openShowFromUSB:function(e){socket.emit("openShowFromUSB",[e,app.usbPath]),$("#showFilesModal").modal("hide")},ifMobile:function(){return isMobile.any},addFixture:function(e,t){socket.emit("addFixture",{fixtureName:e,dcid:t,startDMXAddress:$("#newFixtureStartDMXAddress").val(),creationCount:$("#newFixtureCreationCount").val()}),$("#fixtureProfilesModal").modal("hide")},addEffect:function(e){socket.emit("addEffect",{effectFile:e,fixtureID:app.effectFixture}),$("#fixtureAddEffectsModal").modal("hide")},upperCase:function(e){return e.toUpperCase().replace(/-/g," ")},titleCase:function(e){return e.toLowerCase().split(" ").map(function(e){return e.charAt(0).toUpperCase()+e.slice(1)}).join(" ")},updateGrandmasterValue:function(){socket.emit("changeGrandmasterValue",app.grandmaster)},toggleBlackout:function(){socket.emit("toggleBlackout")},recordPreset:function(){socket.emit("recordPreset")},closeSettings:function(){socket.emit("closeSettings"),$("#openSettingsModal").modal("hide")}}});Mousetrap.bind("r",function(){recordCue()}),Mousetrap.bind("end",function(){stopCue()}),Mousetrap.bind("right",function(){nextCue()}),Mousetrap.bind("left",function(){lastCue()}),Mousetrap.bind("ctrl+n",function(){return resetShow(),!1}),Mousetrap.bind("shift+a",function(){return addFixtureModal(),!1}),Mousetrap.bind("ctrl+s",function(){return window.location="/showFile",!1}),socket.on("message",function(e){$("#alertText").text(e.content),$("#alert").addClass("show"),$("#alert").fadeTo(1e3,500).slideUp(500,function(){$("#alert").removeClass("show")}),"info"==e.type?$("#alert").addClass("alert-info"):$("#alert").addClass("alert-danger")}),socket.on("blackout",function(e){app.blackout=e}),socket.on("grandmaster",function(e){app.grandmaster=e}),socket.on("currentCue",function(e){app.currentCue=e}),socket.on("fixtures",function(e){backupFixtures=e,"fixtures"===currentTab&&(app.fixtures=e)}),socket.on("fixtureProfiles",function(e){app.newFixtureCreationCount=1,app.startDMXAddress=e[1],app.fixtureProfiles=e[0],$("#searchFixtureProfiles").val(""),searchFixtureProfiles(),$("#fixtureProfilesModal").modal("show")}),socket.on("fixtureEffects",function(e){app.fixtureEffects=e[1],app.effectFixture=e[0],$("#fixtureAddEffectsModal").modal("show")}),socket.on("shows",function(e){app.showFiles=e[0],app.usbPath=e[1],$("#showFilesModal").modal("show")}),socket.on("fixtureParameters",function(e){openTab("fixtureParametersPage"),$("#fixtureParameters").empty(),$("#fixtureParametersName").text(e.name+" ("+e.startDMXAddress+")"),$("#fixtureSettingsBtn").off().on("click",function(){viewFixtureSettings(e.id)}),$("#fixtureAddEffectBtn").off().on("click",function(){getEffects(e.id)}),$("#fixtureResetBtn").off().on("click",function(){resetFixture(e.id)});var t=0;const o=e.parameters.length;for(;t<o;t++)chanString="",e.parameters[t].locked?chanString+='<button class="btn btn-info" onclick="updateFixtureParameterLock(this, \''+e.id+"', "+t+')"><i class="far fa-lock-alt fa-sm"></i></button>':chanString+='<button class="btn btn-info" onclick="updateFixtureParameterLock(this, \''+e.id+"', "+t+')"><i class="far fa-lock-open-alt fa-sm "></i></button>',chanString+='<label class="ml-2" ',chanString+='for="'+e.parameters[t].type+'">'+e.parameters[t].name+':</label><input type="range" class="custom-range" id="'+e.parameters[t].type+'" max="'+e.parameters[t].max+'" min="'+e.parameters[t].min+'" value="'+e.parameters[t].value+'" oninput="updateFixtureParameterValue(this, \''+e.id+"', "+t+')">',$("#fixtureParameters").append(chanString);if(0!=e.chips.length){var n='<div class="fixtureChips"><h5>Fixture Chips:</h5><div class="row">',i=0;const t=e.chips.length;for(;i<t;i++)n+='<div class="col-1"><div class="fixtureChip" style="background-color: '+e.chips[i].color+'" onclick="useFixtureChip(this, \''+e.id+"', "+i+')"></div></div>';n+="</div></div>",$("#fixtureParameters").append(n)}if(0!=e.effects.length){n='<div class="fixtureEffects"><h5>Fixture Effects:</h5><ul class="list-group">';var r=0;const t=e.effects.length;for(;r<t;r++)1==e.effects[r].active?n+='<li class="list-group-item fixtureEffect">'+e.effects[r].name+" ("+e.effects[r].type+')<button class="float-right btn btn-sm btn-primary">Settings</button><button class="float-right btn btn-sm btn-success" onclick="changeFixtureEffectState(this, \''+e.id+"', '"+e.effects[r].id+"')\">Deactivate</button></li>":n+='<li class="list-group-item fixtureEffect">'+e.effects[r].name+" ("+e.effects[r].type+')<button class="float-right btn btn-sm btn-primary">Settings</button><button class="float-right btn btn-sm btn-warning" onclick="changeFixtureEffectState(this, \''+e.id+"', '"+e.effects[r].id+"')\">Activate</button></li>";n+="</ul></div>",$("#fixtureParameters").append(n)}}),socket.on("fixtureSettings",function(e){openTab("fixtureSettingsPage"),$("#fixtureParametersBackBtn").off().on("click",function(){app.viewFixtureParameters(e.id)}),$("#fixtureDeleteBtn").off().on("click",function(){removeFixture(e.id)}),$("#fixtureSaveBtn").off().on("click",function(){saveFixtureSettings(e.id)}),$("#fixtureNameInput").val(e.name),$("#fixtureShortNameInput").val(e.shortName),$("#fixtureDMXAddressInput").val(e.startDMXAddress)}),socket.on("cues",function(e){app.cues=e}),socket.on("presets",function(e){app.presets=e}),socket.on("presetSettings",function(e){openTab("presetSettingsPage"),$("#presetDeleteBtn").off().on("click",function(){removePreset(e.id)}),$("#presetSaveBtn").off().on("click",function(){savePresetSettings(e.id)}),$("#presetActiveBtn").off().on("click",function(){app.changePresetActive(e.id)}),$("#presetNameInput").val(e.name),e.active?$("#presetActiveBtn").html("Deactivate"):$("#presetActiveBtn").html("Activate")}),socket.on("cueSettings",function(e){openTab("cueSettingsPage"),$("#cueDeleteBtn").off().on("click",function(){removeCue(e.id)}),$("#cueSaveBtn").off().on("click",function(){saveCueSettings(e.id)}),$("#gotoCueBtn").off().on("click",function(){gotoCue(e.id)}),$("#cueUpdateBtn").off().on("click",function(){updateCue(e.id)}),$("#cueCloneEndBtn").off().on("click",function(){cloneCueEnd(e.id)}),$("#cueCloneNextBtn").off().on("click",function(){cloneCueNext(e.id)}),$("#moveCueUpBtn").off().on("click",function(){moveCueUp(e.id)}),$("#moveCueDownBtn").off().on("click",function(){moveCueDown(e.id)}),$("#cueNameInput").val(e.name),$("#cueUpTimeInput").val(e.upTime),$("#cueDownTimeInput").val(e.downTime),$("#cueFollowInput").val(e.follow)}),socket.on("cueActionBtn",function(e){$("#cueActionBtn").empty(),0==e?($("#cueActionBtn").off().on("click",function(){recordCue()}),$("#cueActionBtn").append("Record")):($("#cueActionBtn").off().on("click",function(){stopCue()}),$("#cueActionBtn").append("Stop"))}),socket.on("groups",function(e){app.groups=e}),socket.on("groupSettings",function(e){openTab("groupSettingsPage"),$("#groupParametersBackBtn").off().on("click",function(){app.viewGroupParameters(e.group.id)}),$("#groupDeleteBtn").off().on("click",function(){removeGroup(e.group.id)}),$("#groupSaveBtn").off().on("click",function(){saveGroupSettings(e.group.id)}),$("#groupNameInput").val(e.group.name),$("#groupFixtures").empty();let t=0;const o=e.groupFixtures.length;for(;t<o;t++)$("#groupFixtures").append(e.groupFixtures[t][0]+" ("+e.groupFixtures[t][1]+")"),e.groupFixtures.length>1&&$("#groupFixtures").append(' <button class="btn btn-danger btn-sm mb-1" onclick="removeGroupFixture(\''+e.group.id+"','"+e.groupFixtures[t][2]+'\')"><i class="far fa-sm fa-trash-alt"></i></button><br>')}),socket.on("groupParameters",function(e){openTab("groupParametersPage"),$("#groupParameters").empty(),$("#groupParametersName").text(e.name),$("#groupSettingsBtn").off().on("click",function(){viewGroupSettings(e.id)}),$("#groupResetBtn").off().on("click",function(){resetGroup(e.id)});let t=0;const o=e.parameters.length;for(;t<o;t++)$("#groupParameters").append('<label class="ml-2" for="'+e.parameters[t].type+'">'+e.parameters[t].name+':</label><input type="range" class="custom-range" id="groupChan'+t+'" max="'+e.parameters[t].max+'" min="'+e.parameters[t].min+'" value="'+e.parameters[t].value+'" oninput="updateGroupParameterValue(this, \''+e.id+"', "+t+')">')}),socket.on("settings",function(e){$("#defaultUpTime").val(e.defaultUpTime),$("#defaultDownTime").val(e.defaultDownTime),$("#useUDMX").prop("indeterminate",e.udmx),$("#useAutomark").prop("indeterminate",e.automark),$("#sacnIP").val(e.sacnIP),$("#artnetIP").val(e.artnetIP),$("#openSettingsModal").modal("show")}),socket.on("meta",function(e){app.desktop=e.desktop,app.version=e.version,app.qrcode=e.qrcode,app.appURL=e.url}),socket.on("connect",function(){$("#serverDisconnectedModal").modal("hide")}),socket.on("connect_error",function(){$("#serverDisconnectedModal").modal("show")}),$(".custom-file-input").change(function(){var e=$(this).val().split("\\").pop();$(this).next(".custom-file-label").html(e)});