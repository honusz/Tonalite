function launchFullScreen(e){e.requestFullScreen?e.requestFullScreen():e.mozRequestFullScreen?e.mozRequestFullScreen():e.webkitRequestFullScreen&&e.webkitRequestFullScreen()}function resetFixtures(){confirm("Are you sure you want to reset all fixture channel values?")&&socket.emit("resetFixtures")}function resetFixture(e){confirm("Are you sure you want to reset this fixture's channel values?")&&socket.emit("resetFixture",e)}function addFixtureModal(){socket.emit("getFixtureProfiles"),$("#fixtureProfilesModal").modal("show")}function openFixtureDefinitionModal(){$("#openFixtureDefinitionModal").modal("show")}function addFixture(e){socket.emit("addFixture",{fixtureName:e,startDMXAddress:parseInt($("#newFixtureStartDMXAddress").val()),creationCount:parseInt($("#newFixtureCreationCount").val())}),$("#fixtureProfilesModal").modal("hide")}function viewFixtureChannels(e){socket.emit("getFixtureChannels",e)}function viewFixtureSettings(e){socket.emit("getFixtureSettings",e)}function updateFixtureChannelValue(e,t,n){socket.emit("changeFixtureChannelValue",{id:t,cid:n,value:parseInt(e.value)})}function updateFixtureChannelLock(e,t,n){socket.emit("changeFixtureChannelLock",{id:t,cid:n})}function removeFixture(e){confirm("Are you sure you want to delete this fixture?")&&(socket.emit("removeFixture",e),openTab("fixtures"))}function saveFixtureSettings(e){socket.emit("editFixtureSettings",{id:e,name:$("#fixtureNameInput").val(),shortName:$("#fixtureShortNameInput").val(),startDMXAddress:$("#fixtureDMXAddressInput").val()})}function removeCue(e){confirm("Are you sure you want to delete this cue?")&&(socket.emit("removeCue",e),openTab("cues"))}function saveCueSettings(e){socket.emit("editCueSettings",{id:e,name:$("#cueNameInput").val(),upTime:$("#cueUpTimeInput").val(),downTime:$("#cueDownTimeInput").val(),follow:$("#cueFollowInput").val()})}function recordCue(){socket.emit("recordCue")}function nextCue(){socket.emit("nextCue")}function lastCue(){socket.emit("lastCue")}function stopCue(){socket.emit("stopCue")}function gotoCue(e){socket.emit("gotoCue",e)}function updateCue(e){socket.emit("updateCue",e)}function cloneCue(e){socket.emit("cloneCue",e)}function viewCueSettings(e){socket.emit("getCueSettings",e)}function moveCueUp(e){socket.emit("moveCueUp",e)}function moveCueDown(e){socket.emit("moveCueDown",e)}function removePreset(e){confirm("Are you sure you want to delete this preset?")&&(socket.emit("removePreset",e),openTab("presets"))}function viewPresetSettings(e){socket.emit("getPresetSettings",e)}function savePresetSettings(e){socket.emit("editPresetSettings",{id:e,name:$("#presetNameInput").val()})}function recordPreset(){socket.emit("recordPreset")}function changePresetActive(e){socket.emit("changePresetActive",e)}function resetGroup(e){confirm("Are you sure you want to reset this group's channel values?")&&socket.emit("resetGroup",e)}function resetGroups(){confirm("Are you sure you want to reset all group channel values?")&&socket.emit("resetGroups")}function addGroupModal(){$("#addGroupModal").modal("show")}function viewGroupChannels(e){socket.emit("getGroupChannels",e)}function updateGroupChannelValue(e,t,n){socket.emit("changeGroupChannelValue",{id:t,cid:n,value:parseInt(e.value)})}function removeGroup(e){confirm("Are you sure you want to delete this group?")&&(socket.emit("removeGroup",e),openTab("groups"))}function saveGroupSettings(e){socket.emit("editGroupSettings",{id:e,name:$("#groupNameInput").val(),shortName:$("#groupShortNameInput").val(),fixtureIDs:$("#groupFixtureIDsInput").val()})}function addGroup(){socket.emit("addGroup",$("#groupFixtureIDs").val()),$("#addGroupModal").modal("hide")}function viewGroupSettings(e){socket.emit("getGroupSettings",e)}function updateGrandmasterValue(e){socket.emit("changeGrandmasterValue",parseInt(e.value))}function toggleBlackout(){socket.emit("toggleBlackout")}function openShowFileModal(){$("#openShowModal").modal("show")}function openSettingsModal(){socket.emit("getSettings"),$("#openSettingsModal").modal("show")}function resetShow(){confirm("Are you sure you want a new show? This will reset everything.")&&(socket.emit("resetShow"),openTab("fixtures"))}function saveSettings(){socket.emit("saveSettings",{url:$("#serverURL").val(),port:$("#serverPort").val(),defaultUpTime:$("#defaultUpTime").val(),defaultDownTime:$("#defaultDownTime").val()}),$("#openSettingsModal").modal("hide")}function updateFirmware(){socket.emit("updateFirmware")}function closeAlert(){$("#alert").removeClass("show"),$("#alert").hasClass("alert-info")?$("#alert").removeClass("alert-info"):$("#alert").removeClass("alert-danger")}function openTab(e){var t,n,o;for(n=document.getElementsByClassName("tabcontent"),t=0;t<n.length;t++)n[t].style.display="none";if(document.getElementsByClassName("tablinks-"+e)[0])for(o=document.getElementsByClassName("tablinks"),t=0;t<o.length;t++)o[t].classList.remove("active");document.getElementById(e).style.display="block",currentTab=e,"fixtures"==currentTab&&setFixtures(backupFixtures),document.getElementsByClassName("tablinks-"+e)[0]&&document.getElementsByClassName("tablinks-"+e)[0].classList.add("active"),closeAlert()}function titleCase(e){return e.toLowerCase().split(" ").map(function(e){return e.charAt(0).toUpperCase()+e.slice(1)}).join(" ")}function upperCase(e){return e.toUpperCase().replace(/-/g," ")}function setFixtures(e){if(fixturesList.innerHTML="",groupFixtureIDs.innerHTML="",0!=e.length){var t=0;const n=e.length;for(;t<n;t++){e[t].hasLockedChannels?fixtureLock='<i class="ml-2 far fa-lock-alt fa-sm"></i>':fixtureLock="","intensity"==e[t].channels[0].type?fixtureValue='<h3 class="fixtureValue">'+e[t].channels[0].displayValue+"</h3>":""==fixtureLock?fixtureValue='<h3 class="fixtureValue"><i class="ml-2 far fa-lock-open-alt fa-sm"></i></h3>':fixtureValue='<h3 class="fixtureValue">'+fixtureLock+"</h3>";var o=document.createElement("div");o.className="col-4 col-lg-2",o.innerHTML='<div class="fixtureItem" onclick="viewFixtureChannels(\''+e[t].id+"')\">"+fixtureValue+"<p>"+e[t].shortName+fixtureLock+"</p></div>",fixturesList.appendChild(o);var i=document.createElement("option");i.value=e[t].id,i.innerHTML=e[t].shortName+" ("+e[t].startDMXAddress+")",groupFixtureIDs.appendChild(i)}}else $("#fixturesList").append('<div class="col-12"><h5>There are no fixtures in this show!</h5></div>')}var socket=io("http://"+document.domain+":"+location.port),fixturesList=document.getElementById("fixturesList"),groupFixtureIDs=document.getElementById("groupFixtureIDs"),currentTab="fixtures",backupFixtures=[],currentCue="";document.getElementById("fixturesTab").click(),socket.on("message",function(e){$("#alertText").text(e.content),$("#alert").addClass("show"),$("#alert").fadeTo(1e3,500).slideUp(500,function(){$("#alert").removeClass("show")}),"info"==e.type?$("#alert").addClass("alert-info"):$("#alert").addClass("alert-danger")}),socket.on("blackout",function(e){1==e?($("#blackoutBtn").removeClass("btn-primary"),$("#blackoutBtn").addClass("btn-danger")):($("#blackoutBtn").removeClass("btn-danger"),$("#blackoutBtn").addClass("btn-primary"))}),socket.on("grandmaster",function(e){$("#grandmaster").val(e)}),socket.on("fixtures",function(e){"fixtures"==currentTab?(setFixtures(e),backupFixtures=e):backupFixtures=e}),socket.on("fixtureProfiles",function(e){$("#fixtureProfilesList").empty();var t=0;const n=e[0].length;for(;t<n;t++)$("#fixtureProfilesList").append('<li class="list-group-item fixtureProfileItem" onclick="addFixture(\''+e[0][t]+"')\">"+upperCase(e[0][t])+"</li>");$("#newFixtureStartDMXAddress").val(e[1]),$("#newFixtureCreationCount").val(1)}),socket.on("fixtureChannels",function(e){openTab("fixtureChannelsPage"),$("#fixtureChannels").empty(),$("#fixtureChannelsName").text(e.name),$("#fixtureSettingsBtn").off().on("click",function(){viewFixtureSettings(e.id)}),$("#fixtureResetBtn").off().on("click",function(){resetFixture(e.id)});var t=0;const n=e.channels.length;for(;t<n;t++)e.channels[t].locked?$("#fixtureChannels").append('<button class="btn btn-info" onclick="updateFixtureChannelLock(this, \''+e.id+"', "+t+')"><i class="far fa-lock-alt fa-sm"></i></button><label class="ml-2" for="'+e.channels[t].type+'">'+e.channels[t].name+':</label><input type="range" class="custom-range" id="'+e.channels[t].type+'" max="'+e.channels[t].displayMax+'" min="'+e.channels[t].displayMin+'" value="'+e.channels[t].value+'" oninput="updateFixtureChannelValue(this, \''+e.id+"', "+t+')">'):$("#fixtureChannels").append('<button class="btn btn-info" onclick="updateFixtureChannelLock(this, \''+e.id+"', "+t+')"><i class="far fa-lock-open-alt fa-sm "></i></button><label class="ml-2" for="'+e.channels[t].type+'">'+e.channels[t].name+':</label><input type="range" class="custom-range" id="'+e.channels[t].type+'" max="'+e.channels[t].displayMax+'" min="'+e.channels[t].displayMin+'" value="'+e.channels[t].value+'" oninput="updateFixtureChannelValue(this, \''+e.id+"', "+t+')">')}),socket.on("fixtureSettings",function(e){openTab("fixtureSettingsPage"),$("#fixtureChannelsBackBtn").off().on("click",function(){viewFixtureChannels(e.id)}),$("#fixtureDeleteBtn").off().on("click",function(){removeFixture(e.id)}),$("#fixtureSaveBtn").off().on("click",function(){saveFixtureSettings(e.id)}),$("#fixtureNameInput").val(e.name),$("#fixtureShortNameInput").val(e.shortName),$("#fixtureDMXAddressInput").val(e.startDMXAddress)}),socket.on("cues",function(e){if($("#cuesList").empty(),0!=e.length){var t=0;const n=e.length;for(;t<n;t++)1==e[t].active?(style='style="background-color:#f59f00"',currentCue=e[t].id):e[t].id==currentCue?style='style="background-color:#0ca678"':style="",$("#cuesList").append('<div class="col-4 col-lg-2"><div class="cueItem" '+style+"onclick=\"viewCueSettings('"+e[t].id+"')\"><p>"+e[t].name+"</p></div></div>")}else $("#cuesList").append('<div class="col-12"><h5>There are no cues in this show!</h5></div>')}),socket.on("presets",function(e){if($("#presetsList").empty(),0!=e.length){var t=0;const n=e.length;for(;t<n;t++)1==e[t].active?style='style="background-color:#fa5252"':style="",$("#presetsList").append('<div class="col-4 col-lg-2"><div class="presetItem" '+style+"onclick=\"viewPresetSettings('"+e[t].id+"')\"><p>"+e[t].name+"</p></div></div>")}else $("#presetsList").append('<div class="col-12"><h5>There are no presets in this show!</h5></div>')}),socket.on("presetSettings",function(e){openTab("presetSettingsPage"),$("#presetDeleteBtn").off().on("click",function(){removePreset(e.id)}),$("#presetSaveBtn").off().on("click",function(){savePresetSettings(e.id)}),$("#presetActiveBtn").off().on("click",function(){changePresetActive(e.id)}),$("#presetNameInput").val(e.name),e.active?$("#presetActiveBtn").html("Deactivate"):$("#presetActiveBtn").html("Activate")}),socket.on("cueSettings",function(e){openTab("cueSettingsPage"),$("#cueDeleteBtn").off().on("click",function(){removeCue(e.id)}),$("#cueSaveBtn").off().on("click",function(){saveCueSettings(e.id)}),$("#gotoCueBtn").off().on("click",function(){gotoCue(e.id)}),$("#cueUpdateBtn").off().on("click",function(){updateCue(e.id)}),$("#cueCloneBtn").off().on("click",function(){cloneCue(e.id)}),$("#moveCueUpBtn").off().on("click",function(){moveCueUp(e.id)}),$("#moveCueDownBtn").off().on("click",function(){moveCueDown(e.id)}),$("#cueNameInput").val(e.name),$("#cueUpTimeInput").val(e.upTime),$("#cueDownTimeInput").val(e.downTime),$("#cueFollowInput").val(e.follow)}),socket.on("cueActionBtn",function(e){$("#cueActionBtn").empty(),0==e?($("#cueActionBtn").off().on("click",function(){recordCue()}),$("#cueActionBtn").append("Record")):($("#cueActionBtn").off().on("click",function(){stopCue()}),$("#cueActionBtn").append("Stop"))}),socket.on("groups",function(e){$("#groupsList").empty(),0!=e.length?e.forEach(function(e){$("#groupsList").append('<div class="col-4 col-lg-2"><div class="groupItem" onclick="viewGroupChannels(\''+e.id+"')\"><p>"+e.shortName+"</p></div></div>")}):$("#groupsList").append('<div class="col-12"><h5>There are no groups in this show!</h5></div>')}),socket.on("groupSettings",function(e){openTab("groupSettingsPage"),$("#groupChannelsBackBtn").off().on("click",function(){viewGroupChannels(e.id)}),$("#groupDeleteBtn").off().on("click",function(){removeGroup(e.id)}),$("#groupSaveBtn").off().on("click",function(){saveGroupSettings(e.id)}),$("#groupNameInput").val(e.name),$("#groupShortNameInput").val(e.shortName)}),socket.on("groupChannels",function(e){openTab("groupChannelsPage"),$("#groupChannels").empty(),$("#groupChannelsName").text(e.name),$("#groupSettingsBtn").off().on("click",function(){viewGroupSettings(e.id)}),$("#groupResetBtn").off().on("click",function(){resetGroup(e.id)}),e.channels.forEach(function(t,n){$("#groupChannels").append('<label class="ml-2" for="'+t.type+'">'+t.name+':</label><input type="range" class="custom-range" id="'+t.type+'" max="'+t.displayMax+'" min="'+t.displayMin+'" value="'+t.value+'" oninput="updateGroupChannelValue(this, \''+e.id+"', "+n+')">')})}),socket.on("settings",function(e){$("#serverURL").val(e.url),$("#serverPort").val(e.port),$("#defaultUpTime").val(e.defaultUpTime),$("#defaultDownTime").val(e.defaultDownTime),$("#openSettingsModal").modal("show")}),$(".custom-file-input").change(function(){var e=$(this).val().split("\\").pop();$(this).next(".custom-file-label").html(e)});